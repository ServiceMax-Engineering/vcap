#!/bin/sh
if [ ! -f /etc/issue-standard ]; then
  #very first time.
  cp /etc/issue /etc/issue-standard
else
  cp /etc/issue-standard /etc/issue
fi

ip=`/sbin/ifconfig | grep "inet addr" | grep -v "127.0.0.1" | awk '{ print $2 }' | awk -F: '{ print $2 }'`
if [ -n "$ip" ]; then
  echo "Running on $ip" >> /etc/issue
else
  echo "WARNING: Unable to detect the network address on which the server is running"
fi
echo "" >> /etc/issue

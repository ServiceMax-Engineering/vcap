---
mbus: nats://<%= node[:nats_server][:user] %>:<%= node[:nats_server][:password] %>@<%= node[:nats_server][:host] %>:<%= node[:nats_server][:port] %>/
logging:
  level: <%= node[:dns_publisher][:logging][:level] %>

pid: /var/vcap/sys/run/dns_publisher.pid

# publishers 'plugins'; ruby code loaded if the plugin is enabled.
publishers:
# publishes hostnames as aliases of the mdns's hostname. Uses avahi's python bindings.
  mdns_avahi:
    enable: <%= node[:dns_publisher][:publishers][:mdns_avahi][:enable] %>
    require: "#{ROOT_REL}/vcap_dns_publisher/avahi/mdns_avahi_publisher"
    impl: VCAP::DNS_PUBLISHER::AvahiPublisher
    hostnames_filter: <% node[:dns_publisher][:publishers][:mdns_avahi][:hostnames_filter] %>

# registers hostnames with route53 (Not implemnted so far)
  route53:
    require: "#{ROOT_REL}/vcap_dns_publisher/route53/route53_gateway"
    impl: Route53Gateway
    enable: false
    access_key: 123
    secret_key: 4567890
# by default the local IP (can we read it on the router itself?)
    published_ip: 
    unpublish_when_stopped: false
    hostnames_filter: <% node[:dns_publisher][:publishers][:route53][:hostnames_filter] %>
